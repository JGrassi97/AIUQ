JOBS:

  WARMUP_REGRID:
    FILE: templates/warmup_regrid.sh,templates/config.yml
    PLATFORM: "MARENOSTRUM5-LOGIN"
    RUNNING: ONCE
    DEPENDENCIES: SYNCHRONIZE
    NODES: 1
    PROCESSORS: 80
  
  WARMUP_REGRID_ACC:
    FILE: templates/warmup_regrid.sh,templates/config.yml
    PLATFORM: "MARENOSTRUM5-LOGIN-ACC"
    RUNNING: ONCE
    DEPENDENCIES: WARMUP_REGRID
    NODES: 1
    PROCESSORS: 80
  
  PREPARE_ICS:
    FILE: templates/prepare_ics.sh
  
  SAVE_ICS:
    FILE: templates/ics_aifs.sh,templates/config.yml
    PLATFORM: "MARENOSTRUM5ACC"
    DEPENDENCIES: PREPARE_ICS
    RUNNING: DATE
    NODES: 1
    PROCESSORS: 20
    CUSTOM_DIRECTIVES: "#SBATCH --gres=gpu:1"

  SIM:
    FILE: templates/sim_aifs.sh,templates/config.yml
    PLATFORM: "MARENOSTRUM5ACC"
    DEPENDENCIES: SAVE_ICS
    RUNNING: CHUNK
    NODES: 1
    PROCESSORS: 20
    CUSTOM_DIRECTIVES: "#SBATCH --gres=gpu:1"
  
  # CLEAN:
  #   FILE: templates/clean.sh
  #   PLATFORM: "MARENOSTRUM5-LOGIN"
  #   DEPENDENCIES: SIM
  #   RUNNING: DATE
  #   NODES: 1
  #   PROCESSORS: 1

  POSTPROCESS:
    FILE: templates/postprocess_aifs.sh,templates/config.yml
    PLATFORM: "MARENOSTRUM5ACC"
    DEPENDENCIES: SIM
    RUNNING: ONCE
    NODES: 1
    PROCESSORS: 20